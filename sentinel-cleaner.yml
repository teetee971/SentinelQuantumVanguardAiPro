name: ğŸ§¹ Sentinel Submodule Cleaner

on:
  workflow_dispatch:

jobs:
  clean:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§  Checkout du dÃ©pÃ´t
        uses: actions/checkout@v4

      - name: ğŸ§¹ Supprimer toute rÃ©fÃ©rence de sous-module fantÃ´me
        run: |
          echo "ğŸ” Nettoyage des anciens sous-modules Git..."
          git submodule deinit -f --all || true
          rm -rf .git/modules/akiprisaye || true
          git rm -f akiprisaye || true
          rm -rf akiprisaye || true
          echo "âœ… Sous-modules nettoyÃ©s."

      - name: ğŸ”’ Commit de nettoyage
        run: |
          git config --global user.name "sentinel-cleaner-bot"
          git config --global user.email "sentinel@system.local"
          git add -A
          git commit -m "ğŸ§¹ Cleaned submodule references (akiprisaye removed)" || true
          git push origin main || true

      - name: âœ… Validation
        run: echo "ğŸ§  Nettoyage terminÃ© â€” aucune rÃ©fÃ©rence de sous-module restante."