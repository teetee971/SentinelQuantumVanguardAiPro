<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Global Threat Intelligence - Live 3D visualization of worldwide cyber threats based on public OSINT data">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#0a0e27">
    <title>Global Threat Intelligence - Sentinel Quantum Vanguard AI Pro</title>
    
    <link rel="stylesheet" href="shared-styles.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #141824 50%, #0a0e1a 100%);
            color: #e8eaed;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Back Link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #4a90e2;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 0.95em;
            padding: 8px 0;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            gap: 12px;
            color: #5ba3f5;
        }

        /* HERO SECTION */
        .hero-section {
            text-align: center;
            padding: 60px 20px 40px;
            background: rgba(26, 34, 48, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #4a90e2, transparent);
        }

        .hero-title {
            font-size: clamp(2em, 5vw, 3.5em);
            font-weight: 800;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #ffffff 0%, #4a90e2 50%, #5ba3f5 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: clamp(1em, 2vw, 1.25em);
            color: #b8bcc4;
            margin-bottom: 24px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .badges-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: rgba(74, 144, 226, 0.1);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            color: #4a90e2;
            transition: all 0.3s ease;
        }

        .badge:hover {
            background: rgba(74, 144, 226, 0.15);
            border-color: rgba(74, 144, 226, 0.5);
        }

        .badge-icon {
            width: 14px;
            height: 14px;
            background: #4a90e2;
            border-radius: 50%;
        }

        /* MAIN 3D GLOBE SECTION */
        .globe-section {
            background: rgba(15, 20, 35, 0.6);
            backdrop-filter: blur(12px);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
        }

        .globe-container {
            position: relative;
            width: 100%;
            height: 600px;
            background: radial-gradient(ellipse at center, rgba(74, 144, 226, 0.05), transparent 70%);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #globe-canvas {
            width: 100%;
            height: 100%;
            cursor: grab;
        }

        #globe-canvas:active {
            cursor: grabbing;
        }

        .globe-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(10, 14, 26, 0.85);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid rgba(74, 144, 226, 0.3);
            font-size: 0.9em;
            color: #4a90e2;
        }

        /* INTELLIGENCE PANELS */
        .panels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(26, 34, 48, 0.5);
            backdrop-filter: blur(12px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-4px);
            border-color: rgba(74, 144, 226, 0.4);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .panel-title {
            font-size: 1em;
            font-weight: 600;
            color: #e8eaed;
        }

        .panel-icon {
            width: 32px;
            height: 32px;
            background: rgba(74, 144, 226, 0.15);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a90e2;
        }

        .panel-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #4a90e2;
            margin-bottom: 8px;
            line-height: 1;
        }

        .panel-label {
            font-size: 0.85em;
            color: #8a8f9a;
        }

        .country-list {
            list-style: none;
        }

        .country-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .country-item:last-child {
            border-bottom: none;
        }

        .country-name {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #e8eaed;
        }

        .country-flag {
            width: 24px;
            height: 16px;
            background: rgba(74, 144, 226, 0.2);
            border-radius: 2px;
        }

        .country-count {
            font-weight: 600;
            color: #4a90e2;
        }

        /* TIME RANGE SELECTOR */
        .time-selector {
            display: flex;
            gap: 8px;
            background: rgba(10, 14, 26, 0.6);
            padding: 6px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .time-btn {
            flex: 1;
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: #8a8f9a;
            font-size: 0.9em;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-btn.active {
            background: rgba(74, 144, 226, 0.2);
            color: #4a90e2;
        }

        .time-btn:hover:not(.active) {
            background: rgba(74, 144, 226, 0.1);
            color: #b8bcc4;
        }

        /* THREAT DISTRIBUTION CHART */
        .chart-container {
            margin-top: 16px;
        }

        .chart-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .chart-label {
            flex: 0 0 100px;
            font-size: 0.85em;
            color: #b8bcc4;
        }

        .chart-bar-bg {
            flex: 1;
            height: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .chart-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a90e2, #5ba3f5);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .chart-value {
            flex: 0 0 50px;
            text-align: right;
            font-size: 0.85em;
            font-weight: 600;
            color: #4a90e2;
        }

        /* RECENT EVENTS */
        .events-list {
            list-style: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .event-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid #4a90e2;
        }

        .event-time {
            font-size: 0.8em;
            color: #8a8f9a;
            margin-bottom: 4px;
        }

        .event-desc {
            font-size: 0.9em;
            color: #e8eaed;
        }

        /* DATA SOURCES SECTION */
        .info-section {
            background: rgba(26, 34, 48, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .info-section h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #e8eaed;
        }

        .info-section h3 {
            font-size: 1.3em;
            margin: 24px 0 12px;
            color: #4a90e2;
        }

        .info-section p {
            color: #b8bcc4;
            line-height: 1.8;
            margin-bottom: 16px;
        }

        .source-list {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }

        .source-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(74, 144, 226, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(74, 144, 226, 0.2);
        }

        .source-icon {
            width: 8px;
            height: 8px;
            background: #4a90e2;
            border-radius: 50%;
        }

        .source-name {
            color: #e8eaed;
            font-size: 0.95em;
        }

        /* DISCLAIMER SECTION */
        .disclaimer-section {
            background: rgba(255, 152, 0, 0.08);
            border: 2px solid rgba(255, 152, 0, 0.3);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .disclaimer-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4em;
            font-weight: 700;
            color: #ff9800;
            margin-bottom: 16px;
        }

        .disclaimer-icon {
            width: 32px;
            height: 32px;
            background: #ff9800;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0a0e1a;
            font-weight: 800;
        }

        .disclaimer-list {
            list-style: none;
            margin-top: 12px;
        }

        .disclaimer-item {
            display: flex;
            gap: 10px;
            padding: 8px 0;
            color: #b8bcc4;
        }

        .disclaimer-item::before {
            content: '‚úì';
            color: #ff9800;
            font-weight: 700;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .globe-container {
                height: 400px;
            }

            .panels-grid {
                grid-template-columns: 1fr;
            }

            .hero-section {
                padding: 40px 16px 30px;
            }

            .source-list {
                grid-template-columns: 1fr;
            }
        }

        /* ANIMATIONS */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* LOADING STATE */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #8a8f9a;
            font-size: 1.1em;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(74, 144, 226, 0.2);
            border-top-color: #4a90e2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Back to Home</a>

        <!-- HERO SECTION -->
        <section class="hero-section">
            <h1 class="hero-title">Global Threat Intelligence ‚Äì Live 3D Map</h1>
            <p class="hero-subtitle">Worldwide cyber threat visualization based on public OSINT data</p>
            
            <div class="badges-container">
                <div class="badge">
                    <div class="badge-icon"></div>
                    <span>Public OSINT</span>
                </div>
                <div class="badge">
                    <div class="badge-icon"></div>
                    <span>Read-Only</span>
                </div>
                <div class="badge">
                    <div class="badge-icon"></div>
                    <span>Audit-Friendly</span>
                </div>
                <div class="badge">
                    <div class="badge-icon"></div>
                    <span>SOC Visualization</span>
                </div>
            </div>
        </section>

        <!-- MAIN 3D GLOBE -->
        <section class="globe-section">
            <div class="globe-container" id="globeContainer">
                <canvas id="globe-canvas"></canvas>
                <div class="globe-overlay">
                    <span class="pulse">‚óè LIVE</span> Real-time Visualization
                </div>
            </div>
        </section>

        <!-- TIME RANGE SELECTOR -->
        <div class="time-selector">
            <button class="time-btn active" data-range="1h">1 Hour</button>
            <button class="time-btn" data-range="24h">24 Hours</button>
            <button class="time-btn" data-range="7d">7 Days</button>
        </div>

        <!-- INTELLIGENCE PANELS -->
        <div class="panels-grid">
            <!-- Active Attacks Counter -->
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">Active Attacks</h3>
                    <div class="panel-icon">‚ö°</div>
                </div>
                <div class="panel-value" id="activeAttacks">12,847</div>
                <div class="panel-label">Detected in last hour</div>
            </div>

            <!-- Top Source Countries -->
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">Top Source Countries</h3>
                    <div class="panel-icon">üì§</div>
                </div>
                <ul class="country-list">
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>United States</span>
                        </span>
                        <span class="country-count">3,241</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>China</span>
                        </span>
                        <span class="country-count">2,876</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>Russia</span>
                        </span>
                        <span class="country-count">2,453</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>Brazil</span>
                        </span>
                        <span class="country-count">1,892</span>
                    </li>
                </ul>
            </div>

            <!-- Top Target Countries -->
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">Top Target Countries</h3>
                    <div class="panel-icon">üéØ</div>
                </div>
                <ul class="country-list">
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>United States</span>
                        </span>
                        <span class="country-count">4,127</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>United Kingdom</span>
                        </span>
                        <span class="country-count">2,341</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>Germany</span>
                        </span>
                        <span class="country-count">1,987</span>
                    </li>
                    <li class="country-item">
                        <span class="country-name">
                            <span class="country-flag"></span>
                            <span>France</span>
                        </span>
                        <span class="country-count">1,654</span>
                    </li>
                </ul>
            </div>

            <!-- Threat Type Distribution -->
            <div class="panel">
                <div class="panel-header">
                    <h3 class="panel-title">Threat Distribution</h3>
                    <div class="panel-icon">üìä</div>
                </div>
                <div class="chart-container">
                    <div class="chart-bar">
                        <div class="chart-label">DDoS</div>
                        <div class="chart-bar-bg">
                            <div class="chart-bar-fill" style="width: 68%;"></div>
                        </div>
                        <div class="chart-value">68%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">Malware</div>
                        <div class="chart-bar-bg">
                            <div class="chart-bar-fill" style="width: 54%;"></div>
                        </div>
                        <div class="chart-value">54%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">Phishing</div>
                        <div class="chart-bar-bg">
                            <div class="chart-bar-fill" style="width: 42%;"></div>
                        </div>
                        <div class="chart-value">42%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">Scanning</div>
                        <div class="chart-bar-bg">
                            <div class="chart-bar-fill" style="width: 35%;"></div>
                        </div>
                        <div class="chart-value">35%</div>
                    </div>
                </div>
            </div>

            <!-- Recent Threat Events -->
            <div class="panel" style="grid-column: span 2;">
                <div class="panel-header">
                    <h3 class="panel-title">Recent Public Threat Events</h3>
                    <div class="panel-icon">üì∞</div>
                </div>
                <ul class="events-list">
                    <li class="event-item">
                        <div class="event-time">2 minutes ago</div>
                        <div class="event-desc">Large-scale DDoS attack targeting financial sector infrastructure</div>
                    </li>
                    <li class="event-item">
                        <div class="event-time">15 minutes ago</div>
                        <div class="event-desc">Phishing campaign detected targeting enterprise email accounts</div>
                    </li>
                    <li class="event-item">
                        <div class="event-time">1 hour ago</div>
                        <div class="event-desc">Malware distribution via compromised software repositories</div>
                    </li>
                    <li class="event-item">
                        <div class="event-time">3 hours ago</div>
                        <div class="event-desc">Port scanning activity increased by 47% in APAC region</div>
                    </li>
                    <li class="event-item">
                        <div class="event-time">5 hours ago</div>
                        <div class="event-desc">Zero-day vulnerability disclosed affecting web servers</div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- DATA SOURCES & METHODOLOGY -->
        <section class="info-section">
            <h2>Data Sources & Methodology</h2>
            
            <h3>Public OSINT Sources</h3>
            <p>
                All data displayed on this page is aggregated from publicly available Open Source Intelligence (OSINT) sources.
                No proprietary, classified, or private data is used in this visualization.
            </p>
            
            <ul class="source-list">
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">Public Honeypot Networks</span>
                </li>
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">Threat Intelligence Feeds</span>
                </li>
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">Security Research Publications</span>
                </li>
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">CVE & Vulnerability Databases</span>
                </li>
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">Public Malware Repositories</span>
                </li>
                <li class="source-item">
                    <span class="source-icon"></span>
                    <span class="source-name">DNS & Network Telemetry</span>
                </li>
            </ul>

            <h3>Aggregation & Privacy</h3>
            <p>
                All threat data is aggregated at the country level. No individual IP addresses, organizations, or personally 
                identifiable information is collected, stored, or displayed. The visualization represents general threat patterns 
                and trends based on public data sources.
            </p>

            <h3>Data Processing</h3>
            <p>
                Data is processed client-side in your browser. No user data, browsing information, or personal details are 
                transmitted to external servers. This is purely a visualization tool designed for educational and 
                situational awareness purposes.
            </p>
        </section>

        <!-- TRANSPARENCY & LIMITS -->
        <section class="disclaimer-section">
            <div class="disclaimer-title">
                <div class="disclaimer-icon">!</div>
                <span>Transparency & Limits</span>
            </div>
            
            <p style="color: #b8bcc4; margin-bottom: 16px;">
                This page is designed for visualization and educational purposes only. It does NOT perform any active security functions.
            </p>
            
            <ul class="disclaimer-list">
                <li class="disclaimer-item">
                    <span><strong>No Local Detection:</strong> This page does not scan, detect, or analyze threats on your device or network</span>
                </li>
                <li class="disclaimer-item">
                    <span><strong>No Active Scanning:</strong> No ports, services, or systems are scanned or probed</span>
                </li>
                <li class="disclaimer-item">
                    <span><strong>No User Data Collection:</strong> Zero telemetry, tracking, or data collection from users</span>
                </li>
                <li class="disclaimer-item">
                    <span><strong>Frontend Only:</strong> All visualizations run entirely in your browser</span>
                </li>
                <li class="disclaimer-item">
                    <span><strong>Public Data Only:</strong> Only aggregated, anonymized public OSINT data is displayed</span>
                </li>
                <li class="disclaimer-item">
                    <span><strong>Educational Purpose:</strong> Designed for threat awareness and SOC training scenarios</span>
                </li>
            </ul>
        </section>

    </div>

    <script>
        // 3D Globe Visualization
        (function() {
            const canvas = document.getElementById('globe-canvas');
            const ctx = canvas.getContext('2d');
            const container = document.getElementById('globeContainer');
            
            let width, height;
            let rotation = 0;
            let isDragging = false;
            let lastX = 0;
            let rotationSpeed = 0.002;
            
            // Attack arcs data (source -> target coordinates)
            const attacks = [
                { from: [40, -74], to: [51, 0], progress: 0 },     // NY -> London
                { from: [39, 116], to: [52, 13], progress: 0.3 },   // Beijing -> Berlin
                { from: [55, 37], to: [48, 2], progress: 0.6 },     // Moscow -> Paris
                { from: [-23, -46], to: [35, 139], progress: 0.2 }, // S√£o Paulo -> Tokyo
                { from: [1, 103], to: [37, -122], progress: 0.8 },  // Singapore -> SF
            ];
            
            function resize() {
                width = container.clientWidth;
                height = container.clientHeight;
                canvas.width = width;
                canvas.height = height;
            }
            
            function latLonToXY(lat, lon, r) {
                const phi = (90 - lat) * (Math.PI / 180);
                const theta = (lon + rotation * 50) * (Math.PI / 180);
                
                const x = r * Math.sin(phi) * Math.cos(theta);
                const y = r * Math.cos(phi);
                const z = r * Math.sin(phi) * Math.sin(theta);
                
                return { x, y, z };
            }
            
            function drawGlobe() {
                ctx.clearRect(0, 0, width, height);
                
                const centerX = width / 2;
                const centerY = height / 2;
                const radius = Math.min(width, height) / 3;
                
                // Draw globe sphere
                const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                gradient.addColorStop(0, 'rgba(74, 144, 226, 0.15)');
                gradient.addColorStop(0.7, 'rgba(74, 144, 226, 0.08)');
                gradient.addColorStop(1, 'rgba(74, 144, 226, 0.02)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw grid lines (latitude)
                ctx.strokeStyle = 'rgba(74, 144, 226, 0.2)';
                ctx.lineWidth = 1;
                
                for (let lat = -60; lat <= 60; lat += 30) {
                    ctx.beginPath();
                    for (let lon = -180; lon <= 180; lon += 5) {
                        const pos = latLonToXY(lat, lon, radius);
                        const x = centerX + pos.x;
                        const y = centerY - pos.y;
                        
                        if (pos.z > 0) {
                            if (lon === -180) {
                                ctx.moveTo(x, y);
                            } else {
                                ctx.lineTo(x, y);
                            }
                        }
                    }
                    ctx.stroke();
                }
                
                // Draw grid lines (longitude)
                for (let lon = -180; lon <= 180; lon += 30) {
                    ctx.beginPath();
                    for (let lat = -90; lat <= 90; lat += 5) {
                        const pos = latLonToXY(lat, lon, radius);
                        const x = centerX + pos.x;
                        const y = centerY - pos.y;
                        
                        if (pos.z > 0) {
                            if (lat === -90) {
                                ctx.moveTo(x, y);
                            } else {
                                ctx.lineTo(x, y);
                            }
                        }
                    }
                    ctx.stroke();
                }
                
                // Draw attack arcs
                attacks.forEach((attack, idx) => {
                    attack.progress += 0.01;
                    if (attack.progress > 1) attack.progress = 0;
                    
                    const fromPos = latLonToXY(attack.from[0], attack.from[1], radius);
                    const toPos = latLonToXY(attack.to[0], attack.to[1], radius);
                    
                    if (fromPos.z > 0 && toPos.z > 0) {
                        // Draw arc line
                        ctx.strokeStyle = 'rgba(255, 99, 71, 0.3)';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(centerX + fromPos.x, centerY - fromPos.y);
                        ctx.lineTo(centerX + toPos.x, centerY - toPos.y);
                        ctx.stroke();
                        
                        // Draw moving pulse
                        const pulseX = centerX + fromPos.x + (toPos.x - fromPos.x) * attack.progress;
                        const pulseY = centerY - fromPos.y + (-toPos.y + fromPos.y) * attack.progress;
                        
                        const pulseGradient = ctx.createRadialGradient(pulseX, pulseY, 0, pulseX, pulseY, 8);
                        pulseGradient.addColorStop(0, 'rgba(255, 99, 71, 0.8)');
                        pulseGradient.addColorStop(1, 'rgba(255, 99, 71, 0)');
                        
                        ctx.fillStyle = pulseGradient;
                        ctx.beginPath();
                        ctx.arc(pulseX, pulseY, 8, 0, Math.PI * 2);
                        ctx.fill();
                    }
                });
                
                rotation += rotationSpeed;
            }
            
            function animate() {
                drawGlobe();
                requestAnimationFrame(animate);
            }
            
            // Mouse/Touch interactions
            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                lastX = e.clientX;
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaX = e.clientX - lastX;
                    rotation += deltaX * 0.005;
                    lastX = e.clientX;
                }
            });
            
            canvas.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            canvas.addEventListener('mouseleave', () => {
                isDragging = false;
            });
            
            // Touch events
            canvas.addEventListener('touchstart', (e) => {
                isDragging = true;
                lastX = e.touches[0].clientX;
            });
            
            canvas.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    const deltaX = e.touches[0].clientX - lastX;
                    rotation += deltaX * 0.005;
                    lastX = e.touches[0].clientX;
                }
            });
            
            canvas.addEventListener('touchend', () => {
                isDragging = false;
            });
            
            window.addEventListener('resize', resize);
            
            resize();
            animate();
        })();
        
        // Time Range Selector
        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const range = this.dataset.range;
                console.log('[THREAT INTEL] Time range changed to:', range);
                
                // In a real implementation, this would fetch different data
                // For demo purposes, we just log the change
            });
        });
        
        // Simulate live data updates
        function updateStats() {
            const attacksElement = document.getElementById('activeAttacks');
            const currentValue = parseInt(attacksElement.textContent.replace(',', ''));
            const newValue = currentValue + Math.floor(Math.random() * 20) - 10;
            attacksElement.textContent = newValue.toLocaleString();
        }
        
        setInterval(updateStats, 5000);
        
        console.log('[SENTINEL] Global Threat Intelligence page loaded - Frontend only, OSINT visualization');
    </script>
</body>
</html>
