<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Security &amp; Audit ‚Äî Sentinel Quantum Vanguard AI Pro</title>

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#111827;
      --accent:#00e5ff;
      --accent-2:#4fd1c5;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --success:#10b981;
      --warn:#f59e0b;
      --info:#3b82f6;
      --danger:#ef4444;
      --card:#0f172a;
      --border:#1f2937;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      background:
        radial-gradient(1200px 400px at 20% -10%, rgba(0,229,255,.20), transparent 40%),
        radial-gradient(1000px 300px at 80% -20%, rgba(79,209,197,.18), transparent 45%),
        linear-gradient(180deg, #020617 0%, #0b0f14 100%);
      color:var(--text);
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,Arial,sans-serif;
      line-height:1.6;
      font-size:16px;
    }

    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    
    .container{max-width:1200px;margin:0 auto;padding:20px}
    
    header{
      padding:24px 20px;
      border-bottom:1px solid var(--border);
      background:#0b1220;
    }
    header h1{
      margin:0 0 8px;
      font-size:28px;
      color:var(--accent);
    }
    header p{
      margin:0;
      color:var(--muted);
    }

    .section{
      margin:24px 0;
      padding:20px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:12px;
    }
    
    .section h2{
      margin:0 0 16px;
      font-size:20px;
      color:var(--accent-2);
    }
    
    .section h3{
      margin:20px 0 12px;
      font-size:16px;
      color:var(--text);
    }
    
    .badge{
      display:inline-block;
      padding:4px 12px;
      border-radius:999px;
      font-size:13px;
      font-weight:600;
      margin:4px 4px 4px 0;
    }
    .badge.phase{
      background:#081a38;
      color:#bcd8ff;
      border:1px solid #1e40af;
    }
    .badge.pro{
      background:#2a1807;
      color:#ffd7a3;
      border:1px solid #7c3a00;
    }
    .badge.safe{
      background:#052216;
      color:#b7f7d9;
      border:1px solid #064e3b;
    }
    .badge.active{
      background:#10b981;
      color:#fff;
      border:1px solid #059669;
    }
    .badge.inactive{
      background:#374151;
      color:#9ca3af;
      border:1px solid #4b5563;
    }
    
    .grid{
      display:grid;
      gap:16px;
      margin:16px 0;
    }
    @media (min-width:768px){
      .grid-2{grid-template-columns:repeat(2,1fr)}
      .grid-3{grid-template-columns:repeat(3,1fr)}
    }
    
    .card{
      background:#0b1220;
      padding:16px;
      border:1px solid var(--border);
      border-radius:8px;
    }
    .card h4{
      margin:0 0 8px;
      color:var(--accent-2);
      font-size:14px;
    }
    .card p{
      margin:0;
      font-size:14px;
      color:var(--muted);
    }
    
    table{
      width:100%;
      border-collapse:collapse;
      margin:16px 0;
      font-size:14px;
    }
    th, td{
      padding:12px;
      text-align:left;
      border-bottom:1px solid var(--border);
    }
    th{
      background:#0b1220;
      color:var(--accent-2);
      font-weight:600;
    }
    tr:hover{
      background:#0b1220;
    }
    
    code{
      background:#0b1220;
      padding:2px 6px;
      border-radius:4px;
      font-family:'Courier New', monospace;
      font-size:13px;
      color:var(--accent);
    }
    
    pre{
      background:#0b1220;
      padding:16px;
      border-radius:8px;
      overflow-x:auto;
      border:1px solid var(--border);
      font-size:13px;
    }
    pre code{
      background:transparent;
      padding:0;
    }
    
    .warning-box{
      background:#2a1807;
      border:1px solid #7c3a00;
      border-radius:8px;
      padding:16px;
      margin:16px 0;
    }
    .warning-box strong{
      color:#ffd7a3;
    }
    
    .info-box{
      background:#081a38;
      border:1px solid #1e40af;
      border-radius:8px;
      padding:16px;
      margin:16px 0;
    }
    .info-box strong{
      color:#bcd8ff;
    }
    
    .success-box{
      background:#052216;
      border:1px solid #064e3b;
      border-radius:8px;
      padding:16px;
      margin:16px 0;
    }
    .success-box strong{
      color:#b7f7d9;
    }
    
    .danger-box{
      background:#3d0b0b;
      border:2px solid #dc2626;
      border-radius:8px;
      padding:16px;
      margin:16px 0;
    }
    .danger-box strong{
      color:#fca5a5;
    }
    
    ul, ol{
      margin:8px 0;
      padding-left:24px;
    }
    li{
      margin:6px 0;
    }
    
    .btn{
      display:inline-block;
      padding:10px 20px;
      background:var(--accent);
      color:#011017;
      border:none;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      margin:4px 4px 4px 0;
      text-decoration:none;
    }
    .btn:hover{
      opacity:0.9;
    }
    .btn-danger{
      background:var(--danger);
      color:#fff;
    }
    .btn-secondary{
      background:transparent;
      color:var(--text);
      border:1px solid var(--border);
    }
    
    .status-indicator{
      display:flex;
      align-items:center;
      gap:8px;
      margin:8px 0;
    }
    .status-dot{
      width:12px;
      height:12px;
      border-radius:50%;
    }
    .status-dot.green{background:var(--success)}
    .status-dot.red{background:var(--danger)}
    .status-dot.orange{background:var(--warn)}
    .status-dot.gray{background:var(--muted)}
    
    footer{
      margin-top:40px;
      padding:20px;
      border-top:1px solid var(--border);
      text-align:center;
      color:var(--muted);
    }

    #systemStatus{
      font-family:monospace;
      font-size:12px;
      padding:12px;
      background:#0b1220;
      border:1px solid var(--border);
      border-radius:4px;
      margin-top:12px;
    }
  </style>
</head>
<body>

  <header>
    <div class="container">
      <h1>üîí Security &amp; Audit</h1>
      <p>Phase F ‚Äî Complete Security, Audit, and Activation Control</p>
      <div style="margin-top:12px">
        <span class="badge phase">PHASE F</span>
        <span class="badge pro">PRO MODE</span>
        <span class="badge safe">CONTROLLED</span>
      </div>
    </div>
  </header>

  <div class="container">

    <!-- Current Security Status -->
    <section class="section">
      <h2>üõ°Ô∏è Security Status</h2>
      
      <div class="grid grid-3">
        <div class="card">
          <h4>System Mode</h4>
          <p id="systemMode">Loading...</p>
        </div>
        <div class="card">
          <h4>Backend Status</h4>
          <p id="backendStatus">Loading...</p>
        </div>
        <div class="card">
          <h4>Emergency Controls</h4>
          <p id="emergencyStatus">Loading...</p>
        </div>
      </div>

      <div class="info-box">
        <strong>‚úÖ Security Posture:</strong><br>
        All systems are in controlled activation mode. Features can only be enabled via feature flags with proper authorization.
      </div>

      <div id="systemStatus"></div>
    </section>

    <!-- Feature Flags Control -->
    <section class="section">
      <h2>üéõÔ∏è Feature Flags Control Panel</h2>
      
      <h3>Backend Services</h3>
      <table>
        <thead>
          <tr>
            <th>Feature Flag</th>
            <th>Status</th>
            <th>Mode</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody id="backendFlags">
          <tr>
            <td><code>FEATURE_BACKEND</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>-</td>
            <td>Backend API services</td>
          </tr>
          <tr>
            <td><code>FEATURE_BACKEND_READ_ONLY</code></td>
            <td><span class="badge active">ON</span></td>
            <td>READ-ONLY</td>
            <td>Health & Status endpoints only</td>
          </tr>
          <tr>
            <td><code>FEATURE_BACKEND_WRITE</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>-</td>
            <td>POST/PUT/DELETE operations</td>
          </tr>
        </tbody>
      </table>

      <h3>AI Agents (Progressive States)</h3>
      <table>
        <thead>
          <tr>
            <th>Agent</th>
            <th>Current State</th>
            <th>Type</th>
            <th>Actions Available</th>
          </tr>
        </thead>
        <tbody id="agentStates">
          <tr>
            <td>Network Guardian</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Network Protection</td>
            <td>None (inactive)</td>
          </tr>
          <tr>
            <td>Pegasus Scanner</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Threat Detection</td>
            <td>None (inactive)</td>
          </tr>
          <tr>
            <td>Anti-Fraud Pro</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Fraud Detection</td>
            <td>None (inactive)</td>
          </tr>
          <tr>
            <td>Privacy Guardian</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Privacy Protection</td>
            <td>None (inactive)</td>
          </tr>
          <tr>
            <td>Rootkit Scanner</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Rootkit Detection</td>
            <td>None (inactive)</td>
          </tr>
          <tr>
            <td>Cloud Sync</td>
            <td><span class="badge inactive">DORMANT</span></td>
            <td>Secure Sync</td>
            <td>None (inactive)</td>
          </tr>
        </tbody>
      </table>

      <div class="info-box">
        <strong>Agent State Progression:</strong><br>
        DORMANT (inactive) ‚Üí SANDBOX (safe simulation) ‚Üí MONITOR (observe only) ‚Üí ARMED (full autonomy)
      </div>

      <h3>Logging & Monitoring</h3>
      <table>
        <thead>
          <tr>
            <th>Feature Flag</th>
            <th>Status</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>FEATURE_LOGS_LIVE</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>Real-time log streaming</td>
          </tr>
          <tr>
            <td><code>FEATURE_LOGS_READ_ONLY</code></td>
            <td><span class="badge active">ON</span></td>
            <td>Read-only log access</td>
          </tr>
          <tr>
            <td><code>FEATURE_LOGS_EXPORT</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>Export logs capability</td>
          </tr>
          <tr>
            <td><code>FEATURE_AUDIT_LOG</code></td>
            <td><span class="badge active">ON</span></td>
            <td>Audit trail (always enabled)</td>
          </tr>
        </tbody>
      </table>

      <h3>Mobile & Releases</h3>
      <table>
        <thead>
          <tr>
            <th>Feature Flag</th>
            <th>Status</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>FEATURE_ANDROID_RELEASE</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>Production release builds</td>
          </tr>
          <tr>
            <td><code>FEATURE_ANDROID_AUTO_UPDATE</code></td>
            <td><span class="badge inactive">OFF</span></td>
            <td>Automatic updates</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Activation Procedures -->
    <section class="section">
      <h2>üöÄ Activation Procedures</h2>

      <div class="warning-box">
        <strong>‚ö†Ô∏è AUTHORIZED PERSONNEL ONLY</strong><br>
        These procedures should only be executed by authorized security personnel with proper approval.
      </div>

      <h3>1. Activate Backend (READ-ONLY)</h3>
      <div class="card">
        <h4>Enable Health & Status Endpoints</h4>
        <pre><code>// File: config/feature-flags.js
FEATURE_BACKEND: false,              // Keep OFF
FEATURE_BACKEND_READ_ONLY: true,    // Already ON
FEATURE_BACKEND_WRITE: false,       // Keep OFF

// Available endpoints:
// GET /api/v1/health
// GET /api/v1/system/status
// GET /api/v1/agents
// GET /api/v1/monitoring/metrics</code></pre>
        <p><strong>Risk Level:</strong> <span class="badge safe">LOW</span> ‚Äî Read-only, no data modification</p>
      </div>

      <h3>2. Activate AI Agents (Progressive)</h3>
      <div class="card">
        <h4>Step-by-Step Agent Activation</h4>
        <pre><code>// Phase 1: SANDBOX (safe simulation)
FEATURE_AGENTS: true
AGENT_NETWORK_GUARDIAN: 'SANDBOX'

// Phase 2: MONITOR (observe only, no actions)
AGENT_NETWORK_GUARDIAN: 'MONITOR'

// Phase 3: ARMED (full autonomy) ‚Äî Only after validation
AGENT_NETWORK_GUARDIAN: 'ARMED'</code></pre>
        <p><strong>Risk Levels:</strong></p>
        <ul>
          <li>SANDBOX: <span class="badge safe">SAFE</span> ‚Äî Simulation only</li>
          <li>MONITOR: <span class="badge pro">MEDIUM</span> ‚Äî Passive observation</li>
          <li>ARMED: <span class="badge pro">HIGH</span> ‚Äî Autonomous actions</li>
        </ul>
      </div>

      <h3>3. Activate Live Logging</h3>
      <div class="card">
        <h4>Enable Real-Time Log Streaming</h4>
        <pre><code>// Enable live logs (read-only by default)
FEATURE_LOGS_LIVE: true
FEATURE_LOGS_READ_ONLY: true
FEATURE_LOGS_EXPORT: false  // Keep OFF initially</code></pre>
        <p><strong>Risk Level:</strong> <span class="badge safe">LOW</span> ‚Äî Read-only access</p>
      </div>

      <h3>4. Android Release Mode</h3>
      <div class="card">
        <h4>Transition to Production APK</h4>
        <pre><code>// Enable production release builds
FEATURE_ANDROID_RELEASE: true
FEATURE_ANDROID_AUTO_UPDATE: false  // Manual updates only initially</code></pre>
        <p><strong>Risk Level:</strong> <span class="badge pro">MEDIUM</span> ‚Äî Production deployment</p>
        <div class="warning-box">
          <strong>‚ö†Ô∏è Note:</strong> This requires proper code signing and Play Store configuration
        </div>
      </div>
    </section>

    <!-- Emergency Rollback -->
    <section class="section">
      <h2>üÜò Emergency Procedures</h2>

      <div class="danger-box">
        <strong>üö® EMERGENCY KILL SWITCH</strong><br>
        Use this procedure ONLY in critical situations. This will immediately disable ALL features except audit logging.
      </div>

      <div class="card">
        <h4>Instant Kill Switch</h4>
        <pre><code>// Method 1: JavaScript Console (immediate)
window.SENTINEL_emergencyShutdown()

// Method 2: Feature Flags (manual)
EMERGENCY_SHUTDOWN: true
KILL_SWITCH_ACTIVE: true

// Method 3: Git Rollback
git revert HEAD --no-edit
git push origin main</code></pre>
        <button class="btn btn-danger" onclick="testEmergencyShutdown()">üö® TEST Kill Switch (Safe)</button>
        <p style="margin-top:8px;font-size:13px;color:var(--muted)">This will only test the mechanism, not actually shut down the system</p>
      </div>

      <h3>Rollback Procedures</h3>
      
      <div class="card">
        <h4>Full Rollback to Phase E</h4>
        <pre><code>git log --oneline
git revert &lt;commit-hash&gt; --no-edit
git push origin main</code></pre>
      </div>

      <div class="card">
        <h4>Partial Rollback (Feature-Specific)</h4>
        <pre><code>// Disable specific feature only
FEATURE_AGENTS: false
// Or set all agents to DORMANT
AGENT_NETWORK_GUARDIAN: 'DORMANT'
AGENT_PEGASUS_SCAN: 'DORMANT'
// etc...</code></pre>
      </div>

      <div class="card">
        <h4>Restore from Emergency</h4>
        <pre><code>// After investigation and approval
window.SENTINEL_restoreFromEmergency()

// Or manually:
EMERGENCY_SHUTDOWN: false
KILL_SWITCH_ACTIVE: false</code></pre>
      </div>
    </section>

    <!-- Audit Trail -->
    <section class="section">
      <h2>üìã Audit Trail</h2>

      <div class="success-box">
        <strong>‚úÖ Audit Logging:</strong><br>
        All feature flag changes, agent state transitions, and security events are automatically logged for compliance.
      </div>

      <table>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Event</th>
            <th>User</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2024-12-13 04:30:00</td>
            <td>System Initialized</td>
            <td>SYSTEM</td>
            <td>Phase F deployment completed</td>
          </tr>
          <tr>
            <td>2024-12-13 04:30:01</td>
            <td>Feature Flags Set</td>
            <td>SYSTEM</td>
            <td>All features in controlled state</td>
          </tr>
          <tr>
            <td>2024-12-13 04:30:02</td>
            <td>Backend Initialized</td>
            <td>SYSTEM</td>
            <td>READ-ONLY mode active</td>
          </tr>
          <tr>
            <td>2024-12-13 04:30:03</td>
            <td>Agents Initialized</td>
            <td>SYSTEM</td>
            <td>All agents in DORMANT state</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Compliance & Certification -->
    <section class="section">
      <h2>‚úÖ Compliance & Security Certifications</h2>

      <div class="grid grid-2">
        <div class="card">
          <h4>Security Controls</h4>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Kill Switch: Active</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Audit Logging: Enabled</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Read-Only Mode: Active</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Feature Flags: Controlled</span>
          </div>
        </div>

        <div class="card">
          <h4>Operational Safety</h4>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>All Agents: DORMANT</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Write Operations: Disabled</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Auto-Updates: Disabled</span>
          </div>
          <div class="status-indicator">
            <div class="status-dot green"></div>
            <span>Rollback: Ready</span>
          </div>
        </div>
      </div>

      <h3>Documentation</h3>
      <div class="grid grid-3">
        <a href="system-status.html" class="btn btn-secondary">System Changes & Rollback</a>
        <a href="../backend/docs/API.md" class="btn btn-secondary">API Documentation</a>
        <a href="../ai-modules/README.md" class="btn btn-secondary">Agent Documentation</a>
      </div>
    </section>

  </div>

  <footer>
    <p>&copy; 2024 Sentinel Quantum Vanguard AI Pro - Phase F Security & Audit</p>
    <p><a href="../index.html">‚Üê Retour √† la console principale</a></p>
  </footer>

  <script type="module">
    // Load system status
    async function loadSystemStatus() {
      try {
        const { getSystemStatus } = await import('../config/feature-flags.js');
        const status = getSystemStatus();
        
        // Update UI
        document.getElementById('systemMode').textContent = status.mode || 'CONTROLLED';
        document.getElementById('backendStatus').textContent = status.backend.readOnly ? 'READ-ONLY' : 'OFFLINE';
        document.getElementById('emergencyStatus').textContent = status.killSwitchActive ? 'üö® ACTIVE' : '‚úÖ Ready';
        
        // Display full status
        document.getElementById('systemStatus').textContent = JSON.stringify(status, null, 2);
      } catch (e) {
        console.warn('Feature flags not loaded:', e);
        document.getElementById('systemStatus').textContent = 'Feature flags module not available in this context';
      }
    }

    function testEmergencyShutdown() {
      console.log('[TEST] Emergency shutdown mechanism test');
      alert('‚úÖ Emergency shutdown test completed.\n\nIn a real emergency, this would:\n1. Disable all features immediately\n2. Keep audit logging active\n3. Log the shutdown event\n\nThe system remains operational in this test.');
    }

    window.testEmergencyShutdown = testEmergencyShutdown;
    window.addEventListener('DOMContentLoaded', loadSystemStatus);
  </script>

</body>
</html>
