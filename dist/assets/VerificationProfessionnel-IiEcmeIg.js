import{j as e}from"./three-vendor-FmOCzx6_.js";import{b as d}from"./react-vendor-WF2wKGbq.js";import{a as f}from"./index-ngrFHoWO.js";function y(){const[s,m]=d.useState({companyName:"",siret:"",vatNumber:"",companyAddress:"",website:"",contactName:"",contactEmail:"",contactPhone:"",role:"",consent:!1}),[n,b]=d.useState({kbis:null,signatoryId:null,hqProof:null}),[o,i]=d.useState({loading:!1,error:"",ok:!1}),a=r=>m(l=>({...l,[r.target.name]:r.target.type==="checkbox"?r.target.checked:r.target.value})),c=r=>b(l=>({...l,[r.target.name]:r.target.files?.[0]||null})),p=()=>!s.companyName||!s.companyAddress||!s.contactName||!s.contactEmail||!s.contactPhone?"Merci de compléter les champs requis.":s.contactEmail&&!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(s.contactEmail)?"Email de contact invalide.":!n.kbis||!n.signatoryId?"Merci d’ajouter un extrait Kbis et l’identité du signataire.":s.consent?"":"Vous devez accepter le traitement des données.",u=async r=>{r.preventDefault();const l=p();if(l)return i({loading:!1,error:l,ok:!1});try{i({loading:!0,error:"",ok:!1});const t=new FormData;Object.entries(s).forEach(([x,g])=>t.append(x,String(g))),t.append("kbis",n.kbis),t.append("signatoryId",n.signatoryId),n.hqProof&&t.append("hqProof",n.hqProof),await f.post("/api/verification/professionnel",t,{headers:{"Content-Type":"multipart/form-data"}}),i({loading:!1,error:"",ok:!0})}catch(t){i({loading:!1,error:t?.response?.data?.message||"Une erreur est survenue.",ok:!1})}};return e.jsxs("main",{className:"max-w-4xl mx-auto p-5 md:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Vérification — Compte Professionnel"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Fournissez les informations et les documents requis pour activer les fonctionnalités Pro/Business/Enterprise."}),o.ok&&e.jsx("div",{className:"p-3 mb-4 rounded bg-green-900/40 border border-green-600 text-green-200",children:"Votre dossier a été soumis. Un retour vous sera fait rapidement."}),o.error&&e.jsx("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-600 text-red-200",children:o.error}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("section",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Raison sociale"}),e.jsx("input",{name:"companyName",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.companyName,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"SIRET (optionnel)"}),e.jsx("input",{name:"siret",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.siret,onChange:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"TVA (optionnel)"}),e.jsx("input",{name:"vatNumber",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.vatNumber,onChange:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Site web (optionnel)"}),e.jsx("input",{name:"website",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.website,onChange:a})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Adresse du siège"}),e.jsx("input",{name:"companyAddress",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.companyAddress,onChange:a,required:!0})]})]}),e.jsxs("section",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Contact — Nom"}),e.jsx("input",{name:"contactName",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.contactName,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Contact — Email"}),e.jsx("input",{type:"email",name:"contactEmail",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.contactEmail,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Contact — Téléphone"}),e.jsx("input",{name:"contactPhone",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.contactPhone,onChange:a,required:!0})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Rôle/Fonction"}),e.jsx("input",{name:"role",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.role,onChange:a})]})]}),e.jsxs("section",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Extrait Kbis"}),e.jsx("input",{type:"file",name:"kbis",accept:"application/pdf,image/*",onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Pièce identité signataire"}),e.jsx("input",{type:"file",name:"signatoryId",accept:"application/pdf,image/*",onChange:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Justificatif siège (optionnel)"}),e.jsx("input",{type:"file",name:"hqProof",accept:"application/pdf,image/*",onChange:c})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:s.consent,onChange:a}),e.jsx("label",{htmlFor:"consent",className:"text-sm",children:"Nous acceptons le traitement des données et confirmons l’exactitude des informations."})]}),e.jsx("button",{disabled:o.loading,className:"px-4 py-2 rounded bg-sentinel-accent/80 hover:bg-sentinel-accent disabled:opacity-50",children:o.loading?"Envoi...":"Soumettre"})]})]})}export{y as default};
