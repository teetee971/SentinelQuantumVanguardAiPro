import{j as e}from"./three-vendor-FmOCzx6_.js";import{b as c}from"./react-vendor-WF2wKGbq.js";import{a as h}from"./index-ngrFHoWO.js";function v(){const[s,m]=c.useState({fullName:"",birthDate:"",address:"",email:"",phone:"",idType:"CNI",idNumber:"",consent:!1}),[i,p]=c.useState({idFront:null,idBack:null,proofAddress:null}),[d,n]=c.useState({loading:!1,error:"",ok:!1}),a=r=>m(l=>({...l,[r.target.name]:r.target.type==="checkbox"?r.target.checked:r.target.value})),o=r=>p(l=>({...l,[r.target.name]:r.target.files?.[0]||null})),u=()=>!s.fullName||!s.birthDate||!s.address||!s.email||!s.phone||!s.idNumber?"Tous les champs requis doivent être remplis.":/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(s.email)?!i.idFront||!i.idBack||!i.proofAddress?"Merci d’ajouter les justificatifs (recto/verso + justificatif de domicile).":s.consent?"":"Vous devez accepter le traitement des données.":"Email invalide.",b=async r=>{r.preventDefault();const l=u();if(l)return n({loading:!1,error:l,ok:!1});try{n({loading:!0,error:"",ok:!1});const t=new FormData;Object.entries(s).forEach(([x,f])=>t.append(x,String(f))),t.append("idFront",i.idFront),t.append("idBack",i.idBack),t.append("proofAddress",i.proofAddress),await h.post("/api/verification/particulier",t,{headers:{"Content-Type":"multipart/form-data"}}),n({loading:!1,error:"",ok:!0})}catch(t){n({loading:!1,error:t?.response?.data?.message||"Une erreur est survenue.",ok:!1})}};return e.jsxs("main",{className:"max-w-3xl mx-auto p-5 md:p-10",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Vérification d’identité — Particulier"}),e.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Vos informations sont traitées conformément à notre politique de confidentialité."}),d.ok&&e.jsx("div",{className:"p-3 mb-4 rounded bg-green-900/40 border border-green-600 text-green-200",children:"Votre demande a été soumise. Nous reviendrons vers vous rapidement."}),d.error&&e.jsx("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-600 text-red-200",children:d.error}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("section",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Nom complet"}),e.jsx("input",{name:"fullName",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.fullName,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date de naissance"}),e.jsx("input",{type:"date",name:"birthDate",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.birthDate,onChange:a,required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Adresse"}),e.jsx("input",{name:"address",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.address,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.email,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Téléphone"}),e.jsx("input",{name:"phone",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.phone,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Type de pièce"}),e.jsxs("select",{name:"idType",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.idType,onChange:a,children:[e.jsx("option",{value:"CNI",children:"CNI"}),e.jsx("option",{value:"Passeport",children:"Passeport"}),e.jsx("option",{value:"Permis",children:"Permis"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Numéro de pièce"}),e.jsx("input",{name:"idNumber",className:"w-full bg-black/40 border border-gray-700 rounded px-3 py-2",value:s.idNumber,onChange:a,required:!0})]})]}),e.jsxs("section",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Pièce d’identité (recto)"}),e.jsx("input",{type:"file",name:"idFront",accept:"image/*,application/pdf",onChange:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Pièce d’identité (verso)"}),e.jsx("input",{type:"file",name:"idBack",accept:"image/*,application/pdf",onChange:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Justificatif de domicile"}),e.jsx("input",{type:"file",name:"proofAddress",accept:"image/*,application/pdf",onChange:o})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"consent",name:"consent",checked:s.consent,onChange:a}),e.jsx("label",{htmlFor:"consent",className:"text-sm",children:"J’accepte le traitement de mes données dans le cadre de la vérification."})]}),e.jsx("button",{disabled:d.loading,className:"px-4 py-2 rounded bg-sentinel-accent/80 hover:bg-sentinel-accent disabled:opacity-50",children:d.loading?"Envoi...":"Soumettre"})]})]})}export{v as default};
